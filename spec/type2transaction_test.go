// Copyright Â© 2021 Attestant Limited.
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

package spec_test

import (
	"encoding/json"
	"testing"

	"github.com/attestantio/go-execution-client/spec"
	"github.com/goccy/go-yaml"
	"github.com/stretchr/testify/require"
)

func TestType2TransactionJSON(t *testing.T) {
	tests := []struct {
		name     string
		input    []byte
		expected []byte
		err      string
	}{
		{
			name: "Empty",
			err:  "unexpected end of JSON input",
		},
		{
			name:  "JSONBad",
			input: []byte("[]"),
			err:   "invalid JSON: json: cannot unmarshal array into Go value of type spec.type2TransactionJSON",
		},
		{
			name:  "BlockHashMissing",
			input: []byte(`{"accessList":[],"blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "block hash missing",
		},
		{
			name:  "BlockHashWrongType",
			input: []byte(`{"accessList":[],"blockHash":true,"blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.blockHash of type string",
		},
		{
			name:  "BlockHashInvalid",
			input: []byte(`{"accessList":[],"blockHash":"true","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "block hash invalid: encoding/hex: invalid byte: U+0074 't'",
		},
		{
			name:  "BlockNumberMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "block number missing",
		},
		{
			name:  "BlockNumberWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":true,"chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.blockNumber of type string",
		},
		{
			name:  "BlockNumberInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"true","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "block number invalid: strconv.ParseUint: parsing \"true\": invalid syntax",
		},
		{
			name:  "ChainIDMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "chain id missing",
		},
		{
			name:  "ChainIDWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":true,"from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.chainId of type string",
		},
		{
			name:  "ChainIDInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"true","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "chain id invalid: strconv.ParseUint: parsing \"true\": invalid syntax",
		},
		{
			name:  "FromMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "from missing",
		},
		{
			name:  "FromWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":true,"gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.from of type string",
		},
		{
			name:  "FromInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"true","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "from invalid: encoding/hex: invalid byte: U+0074 't'",
		},
		{
			name:  "GasMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "gas missing",
		},
		{
			name:  "GasWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":true,"gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.gas of type string",
		},
		{
			name:  "GasInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"true","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "gas invalid: strconv.ParseUint: parsing \"true\": invalid syntax",
		},
		{
			name:  "GasPriceMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "gas price missing",
		},
		{
			name:  "GasPriceWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":true,"hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.gasPrice of type string",
		},
		{
			name:  "GasPriceInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"true","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "gas price invalid: strconv.ParseUint: parsing \"true\": invalid syntax",
		},
		{
			name:  "HashMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "hash missing",
		},
		{
			name:  "HashWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":true,"input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.hash of type string",
		},
		{
			name:  "HashInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"true","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "hash invalid: encoding/hex: invalid byte: U+0074 't'",
		},
		{
			name:  "InputWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":true,"maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.input of type string",
		},
		{
			name:  "InputInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"true","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "input invalid: encoding/hex: invalid byte: U+0074 't'",
		},
		{
			name:  "MaxFeePerGasMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "max fee per gas missing",
		},
		{
			name:  "MaxFeePerGasWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":true,"maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.maxFeePerGas of type string",
		},
		{
			name:  "MaxFeePerGasInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"true","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "max fee per gas invalid: strconv.ParseUint: parsing \"true\": invalid syntax",
		},
		{
			name:  "MaxPriorityFeePerGasMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "max priority fee per gas missing",
		},
		{
			name:  "MaxPriorityFeePerGasWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":true,"nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.maxPriorityFeePerGas of type string",
		},
		{
			name:  "MaxPriorityFeePerGasInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"true","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "max priority fee per gas invalid: strconv.ParseUint: parsing \"true\": invalid syntax",
		},
		{
			name:  "NonceMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "nonce missing",
		},
		{
			name:  "NonceWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":true,"r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.nonce of type string",
		},
		{
			name:  "NonceInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"true","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "nonce invalid: strconv.ParseUint: parsing \"true\": invalid syntax",
		},
		{
			name:  "ToWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":true,"transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.to of type string",
		},
		{
			name:  "ToInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"true","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "to invalid: encoding/hex: invalid byte: U+0074 't'",
		},
		{
			name:  "TransactionIndexMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "transaction index missing",
		},
		{
			name:  "TransactionIndexWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":true,"type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.transactionIndex of type string",
		},
		{
			name:  "TransactionIndexInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"true","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "transaction index invalid: strconv.ParseUint: parsing \"true\": invalid syntax",
		},
		{
			name:  "ValueMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1"}`),
			err:   "value missing",
		},
		{
			name:  "ValueWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":true}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.value of type string",
		},
		{
			name:  "ValueInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"true"}`),
			err:   "value invalid",
		},
		{
			name:  "VMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","value":"0x8ac7230489e80000"}`),
			err:   "v missing",
		},
		{
			name:  "VWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":true,"value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.v of type string",
		},
		{
			name:  "VInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"true","value":"0x8ac7230489e80000"}`),
			err:   "v invalid",
		},
		{
			name:  "RMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "r missing",
		},
		{
			name:  "RWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":true,"s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.r of type string",
		},
		{
			name:  "RInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"true","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "r invalid",
		},
		{
			name:  "SMissing",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "s missing",
		},
		{
			name:  "SWrongType",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":true,"to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "invalid JSON: json: cannot unmarshal bool into Go struct field type2TransactionJSON.s of type string",
		},
		{
			name:  "SInvalid",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"true","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			err:   "s invalid",
		},
		{
			name:  "Good",
			input: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
		},
		{
			name:     "AccessListEmpty",
			input:    []byte(`{"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
			expected: []byte(`{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`),
		},
	}

	for _, test := range tests {
		t.Run(test.name, func(t *testing.T) {
			var res spec.Type2Transaction
			err := json.Unmarshal(test.input, &res)
			if test.err != "" {
				require.EqualError(t, err, test.err)
			} else {
				require.NoError(t, err)
				require.Equal(t, uint64(2), res.Type())
				rt, err := json.Marshal(&res)
				require.NoError(t, err)
				if len(test.expected) == 0 {
					require.Equal(t, string(test.input), string(rt))
				} else {
					require.Equal(t, string(test.expected), string(rt))
				}
			}
		})
	}
}

func TestType2TransactionYAML(t *testing.T) {
	input := `{"accessList":[],"blockHash":"0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9","blockNumber":"0xcf6501","chainId":"0x1","from":"0x1fec28c7676dd91da41d637d78a67fca584b562f","gas":"0x2a916","gasPrice":"0x245280d497","hash":"0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51","input":"0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b","maxFeePerGas":"0x2f7b337ccb","maxPriorityFeePerGas":"0x59682f00","nonce":"0x182","r":"0x8e232d0e635340aea7cbfa57750b32edb577605c6c372e6ebf45e04995e09aeb","s":"0x2f83c02a61ba9397c9bfed39945560531c9a2110889fc535a8653cf7f172774d","to":"0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f","transactionIndex":"0x58","type":"0x2","v":"0x1","value":"0x8ac7230489e80000"}`
	expected := `{accessList: [], blockHash: '0x1e13ea4d9676ad184f146c3b94d81402a4412f513f20af66f4d1525b83c0ebb9', blockNumber: 13591809, chainId: 1, from: '0x1fec28c7676dd91da41d637d78a67fca584b562f', gas: 174358, gasPrice: 156002997399, hash: '0xba0f5e7f3edb49388c40ddd9b3fdb61b6595287eb9a8bd36ad8af6f3ea767c51', input: '0x7ff36ab5000000000000000000000000000000000000000000000049a31f445f6024688d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000001fec28c7676dd91da41d637d78a67fca584b562f00000000000000000000000000000000000000000000000000000000618c6f7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000004e3fbd56cd56c3e72c1403e103b45db9da5b9d2b', maxFeePerGas: 203930434763, maxPriorityFeePerGas: 1500000000, nonce: 386, r: 64290575112576094551143314176305301948942797999990532932854655213397931498219, s: 21491487126807877835742946237617416685272895654786553106793734443331696621389, to: '0xd9e1ce17f2641f24ae83637ab66a2cca9c378b9f', transactionIndex: 88, type: 2, v: 1, value: 10000000000000000000}`

	var res spec.Type2Transaction
	require.NoError(t, yaml.Unmarshal([]byte(input), &res))
	require.Equal(t, expected, res.String())
}
